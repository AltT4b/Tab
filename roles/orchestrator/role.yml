name: orchestrator
version: "1.0.0"
extends: _base/agent
description: "Top-level coordinator. Decomposes tasks, delegates to worker roles, and assembles final output."

model:
  id: claude-opus-4-5-20251101
  temperature: 0.4
  max_tokens: 16384

system_prompt:
  template: system_prompt.j2
  vars:
    name: "Orchestrator"
    goal: "Coordinate a team of agents to complete complex, multi-step tasks."
    tone: "decisive and structured"
    available_agents: "{{ available_agents | default('researcher, writer, coder') }}"

tools:
  allow: [bash, read_file, write_file]
  deny: [delete_file]

memory:
  type: persistent
  backend: sqlite
  scratchpad: true
  context_strategy: summarize

autonomy:
  max_tool_calls: 100
  max_cost_usd: 10.00
  checkpoint_every: 25
  allowed_paths: ["./workspace/**", "./outputs/**"]
  forbidden_patterns: ["rm -rf", "DROP TABLE"]

output:
  format: markdown
  destinations:
    - type: file
      path: "./outputs/{{ run_id }}/final.md"
    - type: stdout

orchestration:
  role: orchestrator
  can_spawn: [researcher, writer, coder]
  can_delegate_to: [researcher, writer, coder]
  max_sub_agents: 5
  delegation_strategy: sequential

metadata:
  tags: [orchestration, coordination, management]
  author: T4b
  created: "2026-02-25"
